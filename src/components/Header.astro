---
import Image from "astro/components/Image.astro";
import localLogo from 'public/images/local-logo.webp'
// You'll need to create these icon components or replace with your own
// import HamburgerMenu from "@/icons/HamburgerMenu.astro";
// import Close from "@/icons/Close.astro";

const sections = [
  { name: "Acerca De", href: "#acerca" },
  { name: "Lugar y Fecha", href: "#lugar-y-fecha" },
  { name: "Colaboradores", href: "#colaboradores" },
  { name: "Voluntarios", href: "#voluntarios" },
];
---

<header class="header-fixed">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between py-4">
      <!-- Logo -->
      <a href="#" aria-label="Ir a la página de inicio" class="flex-shrink-0">
        <img src="/images/local-logo.webp" width="100" height="100" alt="Local event logo" class="rounded-lg" />
      </a>

      <!-- Desktop Navigation -->
      <nav class="hidden lg:flex items-center gap-8">
        {
          sections.map(({ name, href }) => (
            <a 
              href={href} 
              class="nav-link text-white hover:text-neonYellow transition-colors duration-200 uppercase font-overpassBold font-bold text-sm tracking-wide"
            >
              {name}
            </a>
          ))
        }
        
        <!-- Desktop CTA Button -->
        <a
          href="https://www.spaceappschallenge.org/2025/local-events/Encarnacion/"
          target="_blank"
          rel="noopener noreferrer"
          class="bg-neonYellow text-black font-bold px-4 py-2 rounded-lg text-sm transition-all duration-200 hover:bg-[#C7D806] hover:scale-105 whitespace-nowrap ml-4"
        >
          REGISTRARSE
        </a>
      </nav>

      <!-- Mobile Hamburger Menu -->
      <button aria-label="Abrir menú" class="p-2 lg:hidden text-white" id="menuButton">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div
    class="fixed inset-0 z-[888] flex w-screen h-[100dvh] flex-col items-center overflow-x-auto lg:hidden backdrop-blur-3xl bg-deepBlue/95 opacity-0 pointer-events-none transition-opacity duration-300"
    id="menuMobileContent"
  >
    <aside class="flex w-full items-center justify-end px-6 pt-6">
      <button aria-label="Cerrar menú" id="innerMenuButton" class="p-2 text-white">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </aside>
    <nav class="flex flex-col items-start w-full px-6 gap-5 mt-auto mb-6">
      {
        sections.map(({ name, href }, key) => (
          <a
            href={href}
            class="text-white text-4xl font-overpassBold font-bold tracking-tighter hover:underline hover:text-rocketRed transition-all ease-out duration-75 uppercase"
            id={`navmob-link-${key}`}
          >
            {name}
          </a>
        ))
      }
      
      <!-- Mobile CTA Button -->
      <a
        href="https://www.spaceappschallenge.org/2025/local-events/Encarnacion/"
        target="_blank"
        rel="noopener noreferrer"
        class="bg-neonYellow text-black font-bold px-6 py-3 rounded-lg text-xl transition-all duration-200 hover:bg-[#C7D806] mt-4 w-full text-center uppercase tracking-wider"
      >
        REGISTRARSE AHORA
      </a>
    </nav>
  </div>
</header>

<style>
  .header-fixed {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 999;
    backdrop-filter: blur(8px);
    background-color: rgba(7, 23, 63, 0.95);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .nav-link:hover {
    text-decoration: underline;
  }

  #menuMobileContent {
    backdrop-filter: blur(8px);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
  }

  #menuMobileContent.open {
    opacity: 1;
    pointer-events: all;
  }
</style>

<script>
  function toggleMenu() {
    const menuContent = document.getElementById("menuMobileContent");
    const menuButton = document.getElementById("menuButton");
    const innerMenuButton = document.getElementById("innerMenuButton");

    menuContent?.classList.toggle("open");
    document.body.classList.toggle("overflow-hidden");

    menuButton?.classList.toggle("hidden");
    innerMenuButton?.classList.toggle("open");
  }

  window.onload = () => {
    const menuContent = document.getElementById("menuMobileContent");
    const menuButton = document.getElementById("menuButton");
    const innerMenuButton = document.getElementById("innerMenuButton");

    menuButton?.addEventListener("click", toggleMenu);
    innerMenuButton?.addEventListener("click", toggleMenu);

    const linksMobile = document.querySelectorAll("a[id^='navmob-link-']");
    linksMobile.forEach((link) =>
      link.addEventListener("click", () => {
        toggleMenu();
      })
    );
  };
</script>