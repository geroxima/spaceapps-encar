---
import Rocket from "@/components/icons/rocket.astro";
---

<section
  class="bg-gradient-to-br from-electricBlue to-deepBlue min-h-screen text-white flex flex-col items-center justify-center font-overpassRegular px-4 py-12"
>
  <h1 class="font-firaSansBlack text-3xl sm:text-4xl md:text-5xl text-center">
    NASA SPACE APPS CHALLENGE
  </h1>
  <h2 class="text-2xl sm:text-3xl md:text-4xl text-center">
    Encarnación, Paraguay
  </h2>
  <h3 class="text-2xl sm:text-3xl md:text-4xl text-neonYellow text-center">
    4 y 5 de Octubre del 2025
  </h3>
  <h4 class="text-xl sm:text-2xl md:text-3xl text-center">
    Auditorio de la Universidad Nacional de Itapúa
  </h4>

  <div class="flex justify-center items-center w-full mt-8">
    <div
      class="relative w-[300px] h-[300px] sm:w-[350px] sm:h-[350px] md:w-[450px] md:h-[450px] lg:w-[550px] lg:h-[550px] aspect-square"
    >
      <canvas class="w-full h-full block mx-auto" id="cobe"></canvas>

      <!-- <a
        href="https://www.spaceappschallenge.org/2025/local-events/Encarnacion/"
        target="_blank"
        rel="noopener noreferrer"
        class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-neonYellow text-black font-bold px-4 py-2 sm:px-6 sm:py-3 rounded-lg text-base sm:text-lg transition hover:bg-[#C7D806] z-10 flex items-center gap-2 whitespace-nowrap max-w-[90vw] sm:max-w-none text-center"
        style="pointer-events: auto;"
      >
        <Rocket class="w-5 h-5 sm:w-6 sm:h-6" />
        <span class="whitespace-nowrap">INSCRIBITE A LA COMPETENCIA LOCAL</span>
      </a> -->
    </div>
  </div>

  <script type="module">
    import createGlobe from "https://cdn.skypack.dev/cobe";

    let phi = 0;
    let globe = null;

    function setupGlobe() {
      const canvas = document.getElementById("cobe");
      if (!canvas) return;

      // Get the size of the parent container
      const size = canvas.parentElement.offsetWidth;
      const dpr = window.devicePixelRatio || 1;
      canvas.width = size * dpr;
      canvas.height = size * dpr;

      // Destroy previous globe instance if exists
      if (globe && globe.destroy) globe.destroy();

      globe = createGlobe(canvas, {
        devicePixelRatio: dpr,
        width: canvas.width,
        height: canvas.height,
        phi: 0,
        theta: -0.3,
        dark: 0,
        diffuse: 1.2,
        scale: 1,
        mapSamples: 16000,
        mapBrightness: 6,
        baseColor: [1, 1, 1],
        markerColor: [1, 0.5, 1],
        glowColor: [1, 1, 1],
        offset: [0, 0],
        markers: [
          { location: [-27.306417, -55.88675], size: 0.2 }, // Encarnación
          { location: [40.7128, -74.0060], size: 0.08 },     // New York
          { location: [35.6895, 139.6917], size: 0.08 },     // Tokyo
          { location: [51.5074, -0.1278], size: 0.08 },      // London
          { location: [-33.8688, 151.2093], size: 0.08 },    // Sydney
          { location: [55.7558, 37.6173], size: 0.08 },      // Moscow
          { location: [1.3521, 103.8198], size: 0.08 },      // Singapore
          { location: [19.4326, -99.1332], size: 0.08 },     // Mexico City
          { location: [48.8566, 2.3522], size: 0.08 },       // Paris
          { location: [34.0522, -118.2437], size: 0.08 },    // Los Angeles
          { location: [39.9042, 116.4074], size: 0.08 },     // Beijing
          { location: [28.6139, 77.2090], size: 0.08 },      // New Delhi
          { location: [-23.5505, -46.6333], size: 0.08 },    // São Paulo
          { location: [52.5200, 13.4050], size: 0.08 },      // Berlin
          { location: [41.9028, 12.4964], size: 0.08 },      // Rome
          { location: [37.7749, -122.4194], size: 0.08 },    // San Francisco
          { location: [31.2304, 121.4737], size: 0.08 },     // Shanghai
          { location: [6.5244, 3.3792], size: 0.08 },        // Lagos
          { location: [43.6532, -79.3832], size: 0.08 },     // Toronto
          { location: [-34.6037, -58.3816], size: 0.08 },    // Buenos Aires
        ],
        onRender: (state) => {
          state.phi = phi;
          phi += 0.001;
        },
      });
    }

    window.addEventListener("resize", setupGlobe);
    setupGlobe();
  </script>
</section>
